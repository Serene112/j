<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard - J2G Photobooth</title>
  <link rel="stylesheet" href="css/bootstrap.css">
</head>

<a href="index.html" 
   style="display:inline-block;
          padding:10px 20px;
          background: linear-gradient(45deg, #6a5acd, #7bed9f);
          color:white;
          border-radius:30px;
          text-decoration:none;">
   ‚Üê Back to Website
</a>

<body style="background:#f5f5f5; padding:40px;">

  <div class="container">
    <h2>Admin Login</h2>

    <input type="email" id="adminEmail" class="form-control mt-2" placeholder="Admin Email">
    <input type="password" id="adminPassword" class="form-control mt-2" placeholder="Password">
    <button onclick="adminLogin()" class="btn btn-primary mt-3">Login</button>

    <div id="adminSection" style="display:none; margin-top:30px;">
      <h3>Bookings</h3>
      <div id="bookingList"></div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD9iTEb4284hdn779SY-F3PQIZsjosjRQU",
      authDomain: "j2g-photobooth.firebaseapp.com",
      projectId: "j2g-photobooth",
      storageBucket: "j2g-photobooth.firebasestorage.app",
      messagingSenderId: "522509374646",
      appId: "1:522509374646:web:b19ecf59657dc6576b0217"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    function adminLogin() {
      const email = document.getElementById("adminEmail").value;
      const pass = document.getElementById("adminPassword").value;

      auth.signInWithEmailAndPassword(email, pass)
      .then(() => {
        document.getElementById("adminSection").style.display = "block";
        loadBookings();
      })
      .catch(error => alert(error.message));
    }

    function loadBookings() {
      db.collection("bookings").orderBy("createdAt","desc")
      .onSnapshot(snapshot => {
        let output = "";
        snapshot.forEach(doc => {
          const data = doc.data();
          output += `
            <div style="border:1px solid #ddd; padding:15px; margin-bottom:10px;">
              <strong>${data.name}</strong><br>
              ${data.email}<br>
              ${data.phone}<br>
              ${data.eventDate}<br>
              ${data.message}<br><br>
              <button onclick="deleteBooking('${doc.id}')" 
                style="background:red;color:white;border:none;padding:5px 10px;">
                Delete
              </button>
            </div>
          `;
        });
        document.getElementById("bookingList").innerHTML = output;
      });
    }

    function deleteBooking(id) {
      if(confirm("Delete this booking?")) {
        db.collection("bookings").doc(id).delete();
      }
    }
  </script>

</body>
</html>
